{% load static %}
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">
<link rel="icon" type="image/png" href="{% static 'img/p_logp.png' %}">
<link rel="stylesheet" href="{% static 'dashboar/css/all.css' %}">

<div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title" id="staticBackdropLabel">Cambiar contraseña</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
            </button>
        </div>
        
        <form method="post" action="{% url 'password_change' %}">
            {% csrf_token %}
            
            <div class="modal-body">
                {% if form.errors %}
                    <div>
                        <div class="alert alert-danger">
                            
                            <div class="text-center">
                                <i class="fas fa-times fa-5x"></i>
                            </div>
                            {% for field in form %}
                                {% for error in field.errors %}
                                <ul class="errorlist"><li>{{ error }}</li></ul>
                                {% endfor %}
                            {% endfor %}
                        </div>
                        <a href="{% url 'editPerfilUs' %}" ><button  type="button" class="btn btn-secondary" data-dismiss="modal">Regresar</button></a>
                    </div>
                {% endif %}

                <label>Contraseña antigua</label>
                <input class="form-control mb-3" type="password" name="old_password" autocomplete="current-password" autofocus required id="id_old_password">
                <label>Contraseña nueva</label>
                
                <input class="form-control mb-3" type="password" name="new_password1" autocomplete="new-password" required id="id_new_password1">
                <label>Contraseña nueva (confirmación)</label>
                
                <input class="form-control mb-3" type="password" name="new_password2" autocomplete="new-password" required id="id_new_password2">
                
            </div>
            <div class="submit-row modal-footer">
                <input type="submit" value="Cambiar mi contraseña" class="btn btn-success">
                {% if form.errors %}
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                {% endif %}
            </div>
        </form>    
    </div>
</div>